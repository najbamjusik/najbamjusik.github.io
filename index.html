<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <meta name="apple-mobile-web-app-capable" content="no"/>
    <meta id="myViewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta charset="utf-8"/>
    <meta property="og:url" content="http://www.najbamjusik.pl"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="ZAGRAJ W TELEDYSK - NAJBA MJUSIK"/>
    <meta property="og:description" content="Zamiast biernie oglƒÖdaƒá pokieruj losami teledysku!"/>
    <meta property="og:image"
          content="http://raw.githubusercontent.com/najbamjusik/najbamjusik.github.io/master/asset_preview.png"/>
    <meta property="fb:app_id" content=""/>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151016146-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-151016146-1');
    </script>
    <!-- End Google Analytics -->
    <!-- Facebook Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return;
            n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n;
            n.push = n;
            n.loaded = !0;
            n.version = '2.0';
            n.queue = [];
            t = b.createElement(e);
            t.async = !0;
            t.src = v;
            s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '560194381222510');
        fbq('track', 'PageView');
    </script>
    <noscript>
        <img height="1" width="1" style="display:none"
             src="https://www.facebook.com/tr?id=560194381222510&ev=PageView&noscript=1"/>
    </noscript>
    <!-- End Facebook Pixel Code -->
    <title>Najba Mjusik Gameplay</title>
    <link type="text/css" href="index.css" rel="stylesheet"/>
    <link type="text/css" href="font.css" rel="stylesheet">
    <link type="text/css" href="nes.css" rel="stylesheet"/>
</head>

<body>
<div class="page-title-container">
    <p class="page-title">üíøüíøüíø najbamjusik.pl üíøüíøüíø</p>
</div>
<div class="game-canvas-container">
    <div class="game-canvas gm4html5_div_class" id="gm4html5_div_id">
        <div class="game-logo"></div>
        <canvas id="canvas" width="960" height="540">
            <p>Your browser doesn't support HTML5 canvas.</p>
        </canvas>
        <p class="game-hint">zbieraj itemki <span style="color: #53ff0f">dobre</span>, omijaj itemki <span
                style="color: #ff0000">z≈Çe</span> bo masz graficzny wpierdziel</p>
    </div>
</div>
<div class="header-title-container">
    <div class="header-content">
        <p class="header-title">‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è</p>
        <p class="header-title">Patrz jakie mamy instagramy i daj tam follow</p>
        <p class="header-title">‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è</p>
    </div>
</div>
<div class="feed">
    FEED, TBA
</div>
<script>
    const DOJRZALOSC = "KRULIG_DOJRZALOSC";
    const DZBAN_POLICJA = "DZBAN_POLICJA";

    const sessionId = createUUID();
    const clientId = initClientId();

    var gameEvent = function (rawGameType, rawEventName, rawParams) {
        const gameType = getGameType(rawGameType);
        if (!gameType) {
            return;
        }
        const params = JSON.parse(rawParams.split("'").join('"'));
        const score = params.score;
        const time = Math.round(params.time);
        const gameCounter = params.gameCounter;

        // console.log({gameType, gameCounter, time, score, sessionId});

        putGAGameEvent("GamePlaying");

        if (time === 0) {
            if (gameCounter > 1) {
                putPixelGameEvent("GameRestarted");
            } else {
                putPixelGameEvent("GameStarted");
            }
            return;
        }

        if (isEndOfGame(gameType, time)) {
            putPixelGameEvent("GameFinished");
            return;
        }

        if (time === 60) {
            putPixelGameEvent("GamePlaying");
        }

        if (time === 120) {
            putPixelGameEvent("GamePlaying");
        }

        function putPixelGameEvent(eventName) {
            fbq('trackCustom', eventName, {
                clientId,
                sessionId,
                content_name: gameType,
                content_category: "game",
                gameCounter,
                time,
                score,
            });
        }

        function putGAGameEvent(eventName) {
            gtag('event', eventName, {
                clientId,
                sessionId,
                content_name: gameType,
                content_category: "game",
                gameCounter,
                time,
                score,
            });
        }
    };

    function getGameType(gameTypeRaw) {
        if (gameTypeRaw.endsWith("policje-nalezy-pierdolic")) {
            return DZBAN_POLICJA;
        } else if (gameTypeRaw.endsWith("ballada-o-dojrzalosci")) {
            return DOJRZALOSC;
        } else {
            console.error("unknown gameTypeRaw", gameTypeRaw);
            return undefined;
        }
    }

    function isEndOfGame(gameType, time) {
        switch (gameType) {
            case DOJRZALOSC:
                return time === 169;
            case DZBAN_POLICJA:
                return time === 122;
            default:
                console.error("No end time defined for " + gameType);
                return false;
        }
    }

    function initClientId() {
        const clientIdKey = "3770d3a4-ffe0-462b-8b24-a2b1748d4e08";

        let clientId = window.sessionStorage.getItem(clientIdKey);
        if (!clientId) {
            clientId = createUUID();
            window.localStorage.setItem(clientIdKey, clientId);
            gtag('event', 'NewUserEntered', {
                clientId,
                sessionId,
                content_category: "game",
            });
            fbq('trackCustom', 'NewUserEntered', {
                clientId,
                sessionId,
                content_category: "game",
            });
        } else {
            gtag('event', 'ReturningUserEntered', {
                clientId,
                sessionId,
                content_category: "game",
            });
            fbq('trackCustom', 'NewUserEntered', {
                clientId,
                sessionId,
                content_category: "game",
            });
        }
        return clientId;
    }

    function createUUID() {
        // http://www.ietf.org/rfc/rfc4122.txt
        var s = [];
        var hexDigits = "0123456789abcdef";
        for (var i = 0; i < 36; i++) {
            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
        }
        s[14] = "4";  // bits 12-15 of the time_hi_and_version field to 0010
        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01
        s[8] = s[13] = s[18] = s[23] = "-";

        var uuid = s.join("");
        return uuid;
    }

</script>
<!-- End Event handler ------------------------- -->

<script src="//www.instagram.com/embed.js"></script>
<script type="text/javascript" src="game/ballada-o-dojrzalosci.js?KNIAC=2056727648"></script>
<script>window.onload = GameMaker_Init;</script>
</body>

</html>